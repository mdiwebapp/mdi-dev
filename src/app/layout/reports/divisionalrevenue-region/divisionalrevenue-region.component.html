<div class="row">
    <div class="col-md-12">
        <nav aria-label="breadcrumb" *ngIf="selectedchart == 1">
            <ol class="breadcrumb">
                <!-- <li class="breadcrumb-item"><span class="k-icon k-i-home"></span>
                    <ins> Home</ins>
                </li> -->
                <li class="breadcrumb-item active" aria-current="page">Region</li>
            </ol>
        </nav>

        <nav aria-label="breadcrumb" *ngIf="selectedchart == 2">
            <ol class="breadcrumb">
                <!-- <li class="breadcrumb-item"><span class="k-icon k-i-home"></span>
                    <ins> Home</ins>
                </li> -->
                <li class="breadcrumb-item">
                    <a (click)="this.selectedchart = 1">
                        <ins> Region</ins>
                    </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">{{ this.breadcrumb[1].text}}</li>
            </ol>
        </nav>

        <nav aria-label="breadcrumb" *ngIf="selectedchart == 3">
            <ol class="breadcrumb">
                <!-- <li class="breadcrumb-item"><span class="k-icon k-i-home"></span>
                    <ins>
                        <ins> Home</ins>
                    </ins>
                </li> -->
                <li class="breadcrumb-item">
                    <a (click)="this.selectedchart = 1">
                        <ins> Region</ins>
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a (click)="this.selectedchart = 2">
                        <ins> {{ this.breadcrumb[1].text}}
                        </ins>
                    </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page"> {{ this.breadcrumb[2].text}} </li>
            </ol>
        </nav>
        <nav aria-label="breadcrumb" *ngIf="selectedchart == 4">
            <ol class="breadcrumb">
                <!-- <li class="breadcrumb-item"><span class="k-icon k-i-home"></span>
                    <ins>
                        <ins> Home</ins>
                    </ins>
                </li> -->
                <li class="breadcrumb-item">
                    <a (click)="this.selectedchart = 1">
                        <ins> Region</ins>
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a (click)="this.selectedchart = 2">
                        <ins> {{ this.breadcrumb[1].text}}
                        </ins>
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a (click)="this.selectedchart = 2">
                        <ins> {{ this.breadcrumb[2].text}}
                        </ins>
                    </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page"> {{ this.breadcrumb[3].text}} </li>
            </ol>
        </nav>
        <div class="row m-0 ml-3 mt-5 mb-3">
            <div class="col-md-3">
                <div class="row">
                    <kendo-buttongroup selection="single">

                        <button *ngIf="!displayYtd" kendoButton [selected]="true" [toggleable]="true"
                            (click)="lastMonthClick()">Last
                            Month</button>
                        <button *ngIf="displayYtd" kendoButton [toggleable]="true" (click)="lastMonthClick()">Last
                            Month</button>
                        <button *ngIf="displayYtd" kendoButton [selected]="true" [toggleable]="true"
                            (click)="ytdClick()">YTD</button>
                        <button *ngIf="!displayYtd" kendoButton [toggleable]="true" (click)="ytdClick()">YTD</button>
                    </kendo-buttongroup>
                </div>
                <div class="row mt-2">
                    <kendo-buttongroup selection="single" *ngIf="selectedchart != 3">
                        <button kendoButton [toggleable]="true" [selected]="true"
                            (click)="regionClick()">Region</button>
                        <button kendoButton [toggleable]="true" (click)="divisionClick()">Division</button>
                    </kendo-buttongroup>
                </div>
            </div>
        </div>
        <div class="row m-0 ml-1">

            <div class="col-md-3 text-right">
                <div class="d-flex">
                    <div style="padding: 3px;background-color: #3469a9;width: 20px; height: 20px;"></div> &nbsp;
                    ByPass
                </div>
                <div class="d-flex mt-2">
                    <div style="padding: 3px;background-color: #d94542;width: 20px; height: 20px;"></div> &nbsp;
                    Dewatering
                </div>
            </div>
            <div class="col-md-8" *ngIf="selectedchart == 1">
                <kendo-chart (seriesClick)="level1Click($event)">
                    <kendo-chart-area background="#eee" [margin]="30"> </kendo-chart-area>
                    <kendo-chart-title text={{reportTitle}} color="black" font="19pt sans-serif">
                    </kendo-chart-title>
                    <!-- <kendo-chart-legend position="top" orientation="horizontal">
                    </kendo-chart-legend> -->
                    <kendo-chart-series>
                        <kendo-chart-value-axis>
                            <kendo-chart-value-axis-item [labels]="valueAxisLables">
                                <kendo-chart-value-axis-item-labels>
                                </kendo-chart-value-axis-item-labels>
                            </kendo-chart-value-axis-item>
                        </kendo-chart-value-axis>
                        <kendo-chart-series-item [labels]="seriesLabelsActualVsForecast" [color]="item.color"
                            type="column" [data]="item.items" field="value" *ngFor="let item of levelRevenue"
                            categoryField="region" [stack]="true">
                        </kendo-chart-series-item>
                    </kendo-chart-series>
                </kendo-chart>
            </div>
            <div class="col-md-8" *ngIf="selectedchart == 2">
                <kendo-chart (seriesClick)="level2Click($event)">
                    <kendo-chart-area background="#eee" [margin]="30"> </kendo-chart-area>
                    <kendo-chart-title text={{reportTitle2}} color="black" font="19pt sans-serif">
                    </kendo-chart-title>
                    <!-- <kendo-chart-legend position="top" orientation="horizontal">
                    </kendo-chart-legend> -->
                    <kendo-chart-series>
                        <kendo-chart-value-axis>
                            <kendo-chart-value-axis-item [labels]="valueAxisLables">
                                <kendo-chart-value-axis-item-labels>
                                </kendo-chart-value-axis-item-labels>
                            </kendo-chart-value-axis-item>
                        </kendo-chart-value-axis>
                        <kendo-chart-series-item [color]="item.color" type="column" [data]="item.items" field="value"
                            *ngFor="let item of level2Region" categoryField="branch" [stack]="true">
                            <kendo-chart-series-item-tooltip>
                                <ng-template let-value="value" let-dataItem="dataItem">
                                    {{ convertData(dataItem)}}-{{dataItem.l2R == null ?
                                    0 : dataItem.l2R}} %
                                </ng-template>
                            </kendo-chart-series-item-tooltip>

                        </kendo-chart-series-item>
                    </kendo-chart-series>
                </kendo-chart>
            </div>
            <div class="col-md-8" *ngIf="selectedchart == 3">
                <kendo-chart (seriesClick)="level3Click($event)">
                    <kendo-chart-area background="#eee" [margin]="30"> </kendo-chart-area>
                    <kendo-chart-title text={{reportTitle3}} color="black" font="19pt sans-serif">
                    </kendo-chart-title>
                    <!-- <kendo-chart-legend position="top" orientation="horizontal">
                    </kendo-chart-legend> -->
                    <kendo-chart-series>
                        <kendo-chart-value-axis>
                            <kendo-chart-value-axis-item [labels]="valueAxisLables">
                                <kendo-chart-value-axis-item-labels>
                                </kendo-chart-value-axis-item-labels>
                            </kendo-chart-value-axis-item>
                        </kendo-chart-value-axis>
                        <kendo-chart-category-axis *ngFor="let item of level3Region">
                            <kendo-chart-category-axis-item [categories]="['item.items.am']"
                                [labels]="{rotation:'auto'}">
                            </kendo-chart-category-axis-item>
                        </kendo-chart-category-axis>
                        <!-- <kendo-chart-series-item [labels]="seriesLabelsActualVsForecast" [color]="item.color"
                            type="column" [data]="item.items" field="value" *ngFor="let item of level3Region"
                            categoryField="am" [stack]="true">
                        </kendo-chart-series-item> -->
                        <kendo-chart-series-item [color]="item.color" type="column" [data]="item.items" field="value"
                            *ngFor="let item of level3Region" categoryField="am" [stack]="true">
                            <kendo-chart-series-item-tooltip>
                                <ng-template let-value="value" let-dataItem="dataItem">
                                    {{ convertData(dataItem)}}-{{dataItem.l2R == null ?
                                    0 : dataItem.l2R}} %
                                </ng-template>
                            </kendo-chart-series-item-tooltip>

                        </kendo-chart-series-item>
                    </kendo-chart-series>
                </kendo-chart>
            </div>
            <div class="col-md-12" *ngIf="selectedchart == 4">
                <h4 class="text-center"> {{ 'Account Manager: ' + reportTitle3}}</h4>
                <div class="row">
                    <div class="col-md-4">
                        <kendo-chart (seriesClick)="level4Click($event)">
                            <!-- <kendo-chart-legend position="bottom"></kendo-chart-legend> -->
                            <kendo-chart-series>
                                <kendo-chart-series-item [dashType]="dashType" type="pie" [data]="pieData" field="value"
                                    categoryField="Job">
                                    <kendo-chart-series-item-tooltip>
                                        <ng-template let-value="value" let-dataItem="dataItem">
                                            #{{dataItem.job}} - {{dataItem.custName}} - ${{dataItem.value |
                                            number : '1.2-2'}} - {{dataItem.l2R}}%
                                        </ng-template>
                                    </kendo-chart-series-item-tooltip>
                                </kendo-chart-series-item>
                            </kendo-chart-series>
                        </kendo-chart>
                    </div>
                    <div class="col-md-8">
                        <div class="row mb-2">
                            <kendo-buttongroup selection="single">
                                <button kendoButton [selected]="true" [toggleable]="true"
                                    (click)="GoAccountManagerSection('Invoiced')">Invoiced</button>
                                <button kendoButton [toggleable]="true"
                                    (click)="GoAccountManagerSection('Labor')">Labor</button>
                                <button kendoButton [toggleable]="true"
                                    (click)="GoAccountManagerSection('Inventory')">Inventory</button>
                            </kendo-buttongroup>
                            <label style="font-size: 20px; margin-top: 5px; margin-left: 10px; color: red;"
                                *ngIf="selectedJob">Job #{{selectedJob}} {{selectedCustomer}}</label>

                        </div>
                        <kendo-grid *ngIf="selectedSection == 'Invoiced'" [data]="gridData" [pageSize]="state.take"
                            [skip]="state.skip" [sort]="sortInvoice" (sortChange)="sortChangeInvoice($event)"
                            style="max-height: 530px;" [sortable]="{allowUnsort: false}">
                            <ng-template kendoGridToolbarTemplate style="float: right;">
                                <div class="row w-100">
                                    <div class="col-lg-6">
                                        <button type="button" kendoGridExcelCommand id="btnPrint" filter="button"
                                            class="btn_icon" (click)="downloadFile(' ','Invoiced')">
                                        </button>
                                    </div>
                                    <div class="col-lg-6 text-right">
                                        <label>Sum
                                            : {{ sumOfLineTotal == null ? '' : '$' }}{{ sumOfLineTotal | number :
                                            '1.2-2' }}</label>
                                    </div>
                                </div>

                            </ng-template>
                            <kendo-grid-column field="invoiceNumber" title="Invoice#">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    {{ dataItem.invoiceNumber }}
                                </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column field="transactionType" title="Transaction Type">
                            </kendo-grid-column>
                            <kendo-grid-column field="invoiceDate" title="Invoice Date">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    {{ dataItem.invoiceDate | date }}
                                </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column field="openBalance" title="Open Balance">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    {{ dataItem.openBalance == null ? '' : '$' }}{{ dataItem.openBalance | number :
                                    '1.2-2' }}
                                </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column field="lineTotal" title="Line Total">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    {{ dataItem.lineTotal == null ? '' : '$' }}{{ dataItem.lineTotal | number :
                                    '1.2-2' }}
                                </ng-template>
                            </kendo-grid-column>

                        </kendo-grid>
                        <kendo-grid *ngIf=" selectedSection=='Labor'" class=" grphide" [data]="gridData"
                            [pageSize]="state.take" [skip]="state.skip" [sort]="sortLabor"
                            (sortChange)="sortChangeLabor($event)" style="max-height: 530px;"
                            [sortable]="{allowUnsort: false}">
                            <ng-template kendoGridToolbarTemplate style="float: right;">
                                <button type="button" kendoGridExcelCommand id="btnPrint" filter="button"
                                    class="btn_icon" (click)="downloadFile(' ','Labor')">
                                </button>
                            </ng-template>

                            <kendo-grid-column field="workDate" title="Work Date" [width]="150">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    {{ dataItem.workDate | date }}
                                </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column field="ee" title="EE">
                            </kendo-grid-column>
                            <kendo-grid-column field="laborType" title="Labor Type" [width]="200">
                            </kendo-grid-column>
                            <kendo-grid-column field="totalHours" title="Total Hours" [width]="200">
                            </kendo-grid-column>

                        </kendo-grid>
                        <kendo-grid *ngIf="selectedSection == 'Inventory'" class="grphide" [data]="gridData"
                            [pageSize]="state.take" [skip]="state.skip" [sort]="sortInventory"
                            (sortChange)="sortChangeInventory($event)" style="max-height: 530px;"
                            [sortable]="{allowUnsort: false}">
                            <ng-template kendoGridToolbarTemplate style="float: right;">
                                <button type="button" kendoGridExcelCommand id="btnPrint" filter="button"
                                    class="btn_icon" (click)="downloadFile(' ','Inventory')">
                                </button>
                            </ng-template>
                            <kendo-grid-column field="invType" title="Inventory Type" [width]="200">
                            </kendo-grid-column>
                            <kendo-grid-column field="description" title="Description" [width]="400">
                            </kendo-grid-column>
                            <kendo-grid-column field="tranDate" title="Transaction Date" [width]="150">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    {{ dataItem.tranDate | date }}
                                </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column field="direction" title="Direction" [width]="100">
                            </kendo-grid-column>
                            <kendo-grid-column field="quantity" title="Quantity" [width]="100">
                            </kendo-grid-column>

                        </kendo-grid>

                    </div>
                </div>
            </div>
        </div>
    </div>