<div class="card">
    <form>
        <div class="card-header d-flex flex-row justify-content-start">
            <div class="d-flex justify-content-between">
                <h4 class="p-r-10">Job Report</h4>
            </div>
        </div>
        <div style="max-height: 80vh; overflow: auto;">
            <div class="row justify-content-center m-3 no-gutters">
                <div class="col-md-6">
                    <div class="card">
                        <div class="d-flex justify-content-between">
                            <!-- <div class="wp-50 ml-5">
                                <img src="assets/images/logo.png" />
                            </div> -->
                        </div>
                        <div class="card">
                            <h3 class="p-r-10 text-center">Create Job Report</h3>
                        </div>
                        <div class="row justify-content-center mb-4">
                            <div class="col-md-6">
                                <div class="col-md-12 d-flex justify-content-center">
                                    <button class="k-button w-100" type="submit" style="font-size: 12px;"
                                        (click)="onHandleDialog('status')">Status: {{status_btn}}
                                    </button>
                                </div>
                                <div class="col-md-12 d-flex justify-content-center mt-2">
                                    <button class="k-button w-100" type="submit" style="font-size: 12px;"
                                        (click)="onHandleDialog('am')">AM: {{am_btn}} </button>
                                </div>
                                <div class="col-md-12 d-flex justify-content-center mt-2">
                                    <button class="k-button w-100" type="submit" style="font-size: 12px;"
                                        (click)="onHandleDialog('branch')">Branch: {{branch_btn}}
                                    </button>
                                </div>
                                <div class="col-md-12 d-flex justify-content-center mt-5">
                                    <button class="k-button w-100" style="font-size: 12px;" (click)="ExportJobReport()">View Report
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<kendo-dialog title="Select Status" *ngIf="isStatusVisible" (close)="onHandleDialog('status')" [minWidth]="250"
    [height]="500" [width]="550">
    <div class="row m-0">
        <div class="col-md-12 m-0">
            <div class="row no-gutters m-0">
                <div class="col-md-3 p-1">
                    Search
                </div>
                <div class="col-md-6 p-1">
                    <kendo-textbox [ngModelOptions]="{standalone: true}" class="form-control form-control-round"
                        placeholder="" (keyup)="OnfilterStatus($event.target.value)" [(ngModel)]="filterStatus">
                    </kendo-textbox>
                </div>
                <div class="col-md-3 p-1 text-right">
                    Count: {{statusData.length}}
                </div>
            </div>
        </div>
        <div class="col-md-12 m-0">
            <kendo-grid [selectable]="true" [navigable]="true" [resizable]="true" [reorderable]="true"
                (columnResize)="onResizeColumn($event)" (selectionChange)="onRowSelect($event, 'status')"
                [data]="statusData" [sort]="sort" (sortChange)="onSortChange($event)" kendoGridSelectBy
                [selectedKeys]="statusselections" [sortable]="true" (columnReorder)="onReOrderColumns($event)" [skip]="skip"
                 (dataStateChange)="onDataStateChange($event)"
                [sortable]="{allowUnsort: false, mode: multiple ? 'multiple' : 'single'}" [hideHeader]="true">
                <kendo-grid-column *ngFor="let column of " [width]="column.width" field="{{column.Name}}"
                    title="{{column.Text}}">
                </kendo-grid-column>
            </kendo-grid>
        </div>
    </div>
</kendo-dialog>

<kendo-dialog title="Select Account Manager" *ngIf="isAmVisible" (close)="onHandleDialog('am')" [minWidth]="250"
    [height]="500" [width]="550">
    <div class="row m-0">
        <div class="col-md-12 m-0">
            <div class="row no-gutters m-0">
                <div class="col-md-3 p-1">
                    Search
                </div>
                <div class="col-md-6 p-1">
                    <kendo-textbox [ngModelOptions]="{standalone: true}" class="form-control form-control-round"
                        placeholder="" (keyup)="OnfilterAM($event.target.value)" [(ngModel)]="filterAM">
                    </kendo-textbox>
                </div>
                <div class="col-md-3 p-1 text-right">
                    Count: {{amData.length}}
                </div>
            </div>
        </div>
        <div class="col-md-12 m-0">
            <kendo-grid [selectable]="true" [navigable]="true" [resizable]="true" [reorderable]="true"
                (columnResize)="onResizeColumn($event)" (selectionChange)="onRowSelect($event, 'am')" [data]="amData"
                [sort]="sort" (sortChange)="onSortChange($event)" kendoGridSelectBy [selectedKeys]="AMselections"
                [sortable]="true" (columnReorder)="onReOrderColumns($event)" [skip]="skip" 
                (dataStateChange)="onDataStateChange($event)"
                [sortable]="{allowUnsort: false, mode: multiple ? 'multiple' : 'single'}" [hideHeader]="true">
                <kendo-grid-column *ngFor="let column of amcolumns" [width]="column.width" field="{{column.Name}}"
                    title="{{column.Text}}">
                </kendo-grid-column>
            </kendo-grid>
        </div>
    </div>
</kendo-dialog>

<kendo-dialog title="Select Branch" *ngIf="isBranchVisible" (close)="onHandleDialog('branch')" [minWidth]="250"
    [height]="500" [width]="550">
    <div class="row m-0">
        <div class="col-md-12 m-0">
            <div class="row no-gutters m-0">
                <div class="col-md-3 p-1">
                    Search
                </div>
                <div class="col-md-6 p-1">
                    <kendo-textbox [ngModelOptions]="{standalone: true}" class="form-control form-control-round"
                        placeholder="" (keyup)="OnfilterBranch($event.target.value)" [(ngModel)]="filterBranch">
                    </kendo-textbox>
                </div>
                <div class="col-md-3 p-1 text-right">
                    Count: {{branchData.length}}
                </div>
            </div>
        </div>
        <div class="col-md-12 m-0">
            <kendo-grid [selectable]="true" [navigable]="true" [resizable]="true" [reorderable]="true"
                (columnResize)="onResizeColumn($event)" (selectionChange)="onRowSelect($event, 'branch')"
                [data]="branchData" [sort]="sort" (sortChange)="onSortChange($event)" kendoGridSelectBy
                [selectedKeys]="branchselections" [sortable]="true" (columnReorder)="onReOrderColumns($event)" [skip]="skip"
                (dataStateChange)="onDataStateChange($event)"
                [sortable]="{allowUnsort: false, mode: multiple ? 'multiple' : 'single'}" [hideHeader]="true">
                <kendo-grid-column field="value" title="Value">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <lable>{{ dataItem.value }}</lable>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column field="code" title="Code">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <lable>{{ dataItem.code }}</lable>
                    </ng-template>
                </kendo-grid-column>
            </kendo-grid>
        </div>
    </div>
</kendo-dialog>
<kendo-dialog
  title="No Records Found"
  *ngIf="opened"
  (close)="opened"
  [minWidth]="250"
  [width]="450"
>
  <p style="margin: 30px; text-align: center" class="fs-16">
   No Records Found!
  </p>
  <kendo-dialog-actions>
    <button
      kendoButton
      (click)="openPopup()"
      class="w-100"
      themeColor="primary"
    >
      OK
    </button>
  </kendo-dialog-actions>
</kendo-dialog>

<div class="overlay" style="background-color: #f0f8ff52; z-index: 9999;" [hidden]="!visible">
    <kendo-loader class="spinner" [type]="'converging-spinner'" [themeColor]="'error'" [size]="'large'">
    </kendo-loader>
</div>